<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Mapper.src_dm_phone_price">
    <resultMap id="SrcDmPhonePriceResult" type="com.mljr.spider.model.SrcDmPhonePriceDo">
        <result column="id" property="id" jdbcType="BIGINT" />
        <result column="type" property="type" jdbcType="VARCHAR" />
        <result column="brand" property="brand" jdbcType="VARCHAR" />
        <result column="title" property="title" jdbcType="VARCHAR" />
        <result column="jd_id" property="jdId" jdbcType="VARCHAR" />
        <result column="item_url" property="itemUrl" jdbcType="VARCHAR" />
    </resultMap>

    <select id="load" resultMap="SrcDmPhonePriceResult" parameterType="java.util.HashMap">
        select id, type, brand, title, jd_id, item_url
        FROM src_dm_phone_price
        WHERE item_url = #{itemUrl}
        LIMIT 1
    </select>

    <delete id="delete" parameterType="java.util.HashMap">
        delete from src_dm_phone_price
        WHERE id = #{id}
    </delete>

    <insert id="create" parameterType="com.mljr.spider.model.SrcDmPhonePriceDo">
        insert into src_dm_phone_price (id, type, brand, title, jd_id, item_url)
        values (#{id}, #{type}, #{brand}, #{title}, #{jdId}, #{itemUrl})
    </insert>


    <select id="listByPage" resultMap="SrcDmPhonePriceResult" parameterType="java.util.HashMap">
        SELECT t2.id, t2.type, t2.brand, t2.title, t2.jd_id, t2.item_url
        FROM (
        SELECT id FROM src_dm_phone_price                 ORDER BY id
        LIMIT #{startIndex},#{pageSize})t1,src_dm_phone_price t2 WHERE t1.id = t2.id
    </select>

    <select id="listByPageCount" resultType="java.lang.Integer" parameterType="java.util.HashMap">
        SELECT count(*)
        FROM src_dm_phone_price
    </select>
</mapper>
